{"version":3,"sources":["../../src/pages/modal/modal.module.ts","../../src/pages/modal/modal.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACZ;AAapC;IAAA;IAA8B,CAAC;IAAlB,eAAe;QAX3B,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,yDAAS;aACV;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,yDAAS,CAAC;aACpC;YACD,OAAO,EAAE;gBACP,yDAAS;aACV;SACF,CAAC;OACW,eAAe,CAAG;IAAD,sBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;ACfc;AACiE;AACtC;AACT;AACnB;AAGzC;;;;;GAKG;AAOH;IA2BE,mBACS,OAAsB,EACrB,SAAoB,EAClB,IAAoB,EACnB,QAAyB,EAC1B,SAAyB,EACxB,SAA0B,EAC1B,OAAgB,EAChB,MAAc;QAPlB,YAAO,GAAP,OAAO,CAAe;QACrB,cAAS,GAAT,SAAS,CAAW;QAClB,SAAI,GAAJ,IAAI,CAAgB;QACnB,aAAQ,GAAR,QAAQ,CAAiB;QAC1B,cAAS,GAAT,SAAS,CAAgB;QACxB,cAAS,GAAT,SAAS,CAAiB;QAC1B,YAAO,GAAP,OAAO,CAAS;QAChB,WAAM,GAAN,MAAM,CAAQ;QA9B3B,iBAAY,GAAM,EAAE,CAAC;QAKrB,gBAAW,GAAW,EAAE,CAAC;QAEzB,WAAM,GAAE,EAAE,CAAC;QASX,SAAS;QAET,YAAO,GAAe,EAAE,CAAC,CAAE,oBAAoB;QAc9C,iDAAiD;QAC/C,kCAAkC;QAClC,IAAI,CAAC,OAAO,EAAE,CAAC;IAIlB,CAAC;IAED,8BAAU,GAAV,UAAW,QAAQ;QAAnB,iBAiEC;QAhEC,EAAE,EAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,EAAE,IAAI,oBAAoB,CAAC,EAAC;YACxD,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QAEpC,CAAC;QAED,IAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAGnC,KAAK,EAAC,UAAU;YAChB,OAAO,EAAC,0BAA0B;YAClC,MAAM,EAAE;gBACN;oBACE,IAAI,EAAC,UAAU;oBACf,WAAW,EAAC,GAAG;iBAChB;aACF;YACD,OAAO,EAAC;gBACN;oBACE,IAAI,EAAE,UAAU;oBAChB,OAAO,EAAE,cAAI;wBACX,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;oBAC3B,CAAC;iBACJ;gBACD;oBAEE,IAAI,EAAC,SAAS;oBACd,OAAO,EAAE,cAAI;wBAEX,EAAE,EAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAC;4BACzB,EAAE,EAAC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,UAAU,CAAC,EAAC;gCACvC,KAAI,CAAC,YAAY,EAAE,CAAC;gCACpB,KAAI,CAAC,UAAU,EAAE,CAAC;4BACnB,CAAC;4BAAA,IAAI,EAAC;gCAEH,KAAI,CAAC,MAAM,GAAG;oCACd,KAAK,EAAE,QAAQ,CAAC,QAAQ;oCACxB,MAAM,EAAE,QAAQ,CAAC,SAAS;oCAC1B,MAAM,EAAC,QAAQ,CAAC,YAAY;oCAC5B,QAAQ,EAAE,IAAI,CAAC,QAAQ;oCACvB,GAAG,EAAC,QAAQ,CAAC,SAAS,GAAC,QAAQ,CAAC,YAAY,GAAG,IAAI,CAAC,QAAQ;oCAC5D,IAAI,EAAC,QAAQ,CAAC,UAAU,GAAC,QAAQ,CAAC,YAAY,GAAG,IAAI,CAAC,QAAQ;oCAC9D,OAAO,EAAE,CAAC,IAAI,CAAC,QAAQ,GAAC,QAAQ,CAAC,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,UAAU,GAAC,QAAQ,CAAC,YAAY,GAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,QAAQ,CAAC,SAAS,GAAC,QAAQ,CAAC,YAAY,GAAC,IAAI,CAAC,QAAQ;oCACnK,YAAY,EAAC,QAAQ,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ;iCAClD;4BAGD,CAAC;4BAEV,IAAI;4BAEI,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAI,CAAC,MAAM,CAAC,CAAC,CAAE,8CAA8C;4BAC/E,OAAO,CAAC,GAAG,CAAE,KAAI,CAAC,OAAO,CAAC,CAAC;4BAC3B,KAAI,CAAC,UAAU,EAAE,CAAC;wBACnB,CAAC;wBAAA,IAAI,EAAC;4BACJ,KAAI,CAAC,YAAY,EAAE,CAAC;wBACtB,CAAC;oBAGH,CAAC;iBAEF;aACA;SACF,CAAC,CAAC;QACH,MAAM,CAAC,OAAO,EAAE,CAAC;IACnB,CAAC;IAED,mCAAe,GAAf;QACE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC;IACjC,CAAC;IAED,4BAAQ,GAAR,UAAS,EAAO;QACd,uCAAuC;QAEvC,IAAI,CAAC,eAAe,EAAE,CAAC;QAEvB,wCAAwC;QACxC,IAAI,GAAG,GAAG,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC;QAE1B,yDAAyD;QACzD,EAAE,CAAC,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;YAC5B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,UAAC,IAAI;gBAClC,MAAM,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACxE,CAAC,CAAC;QACJ,CAAC;IACH,CAAC;IAED,kCAAc,GAAd;QACE,OAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;QACxC,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,sBAAsB;QACtB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAC7C,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC;IACtD,CAAC;IAED,8BAAU,GAAV;QACE;;;;UAIE;QACF,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,iCAAiC;QACnE,yBAAyB;IAE1B,CAAC;IAED,gCAAY,GAAZ;QACE,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAChC,OAAO,EAAE,2BAA2B;YACpC,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,KAAK;SAChB,CAAC,CAAC;QAEH,KAAK,CAAC,YAAY,CAAC;YACjB,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC;QAEH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAED,gCAAY,GAAZ;QACE,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAChC,OAAO,EAAE,gCAAgC;YACzC,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,KAAK;SAChB,CAAC,CAAC;QAEH,KAAK,CAAC,YAAY,CAAC;YACjB,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC;QAEH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAID,gCAAY,GAAZ;QACE,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAChC,OAAO,EAAE,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE;YACvC,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,KAAK;SAChB,CAAC,CAAC;QAEH,KAAK,CAAC,YAAY,CAAC;YACjB,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC;QAEH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAED,oCAAgB,GAAhB;IAEA,CAAC;IAGD,+BAAW,GAAX;QAAA,iBAKC;QAJC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,UAAC,GAAG;YACrC,KAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC;YAC9B,KAAI,CAAC,MAAM,GAAG,KAAI,CAAC,QAAQ,CAAC;QAC9B,CAAC,CAAC;IACJ,CAAC;IAEF,6BAAS,GAAT,UAAU,KAAK;QAAf,iBAyBA;QAxBA,8CAA8C;QAC7C,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;YACjB,IAAI,EAAE,YAAY;YAClB,QAAQ,EAAE,SAAS;SACpB,CAAC,CAAC,IAAI,CAAC,UAAC,EAAgB;YAEvB,KAAI,CAAC,QAAQ,GAAG,wJAAsJ;YAGtK,6FAA6F;YAC7F,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACnB,EAAE,CAAC,UAAU,CAAC,KAAI,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,CAAC;iBACpC,IAAI,CAAC,aAAG;gBACP,KAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;gBACnB,GAAG,EAAC,IAAI,CAAC,GAAC,CAAC,EAAE,CAAC,GAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBACpC,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAC,iBAAiB,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,iBAAiB,EAAE,cAAc,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,cAAc;wBACxH,WAAW,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,WAAW,EAAC,sBAAsB,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,sBAAsB,EAAC,CAAC;gBAC3G,CAAC;gBACF,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,QAAQ,CAAC;YAC3B,CAAC,CAAC;iBACD,KAAK,CAAC,WAAC,IAAI,cAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAd,CAAc,CAAC,CAAC;QAChC,CAAC,CAAC,CAAC;QACF,KAAK;IAEN,CAAC;IAMC,2BAAO,GAAP;QAAA,iBA6CD;QA5CG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;YACjB,IAAI,EAAE,YAAY;YAClB,QAAQ,EAAE,SAAS;SACpB,CAAC,CAAC,IAAI,CAAC,UAAC,EAAgB;YAEvB,KAAI,CAAC,QAAQ,GAAG,qlEAe4I;YAG5J,6FAA6F;YAC7F,EAAE,CAAC,UAAU,CAAC,KAAI,CAAC,QAAQ,EAAE,CAAC,KAAI,CAAC,QAAQ,EAAE,KAAI,CAAC,OAAO,CAAC,UAAU,EAAE,KAAI,CAAC,cAAc,CAAC,CAAC;iBAC1F,IAAI,CAAC,aAAG;gBACP,KAAI,CAAC,YAAY,GAAG,EAAE,CAAC;gBACvB,GAAG,EAAC,IAAI,CAAC,GAAC,CAAC,EAAE,CAAC,GAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBACpC,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAC,QAAQ,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAC,SAAS,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS;wBAC7F,KAAK,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK;wBAC5B,QAAQ,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ;wBAClC,YAAY,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,YAAY;wBAC1C,SAAS,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS;wBACpC,UAAU,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,UAAU;wBACtC,WAAW,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,WAAW;wBACxC,UAAU,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,UAAU;wBACtC,WAAW,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,WAAW;wBACxC,UAAU,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,UAAU;qBACvC,CAAC;gBACJ,CAAC;YACH,CAAC,CAAC;iBACD,KAAK,CAAC,WAAC,IAAI,cAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAd,CAAc,CAAC,CAAC;QAChC,CAAC,CAAC,CAAC;IAEL,CAAC;IA3RY,SAAS;QAJrB,gEAAS,CAAC;YACT,QAAQ,EAAE,YAAY;WACG;SAC1B,CAAC;6EA6B+B;YACV,qEAAS;YACZ,sFAAc;YACV,uEAAgB;YAChB,sEAAe;YACb,gEAAe;YACjB,qEAAO;YACR,MAAM;OAnChB,SAAS,CA4TrB;IAAD,CAAC;AAAA;SA5TY,SAAS,e","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ModalPage } from './modal';\n\n@NgModule({\n  declarations: [\n    ModalPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ModalPage),\n  ],\n  exports: [\n    ModalPage\n  ]\n})\nexport class ModalPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/modal/modal.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController, AlertController, ToastController } from 'ionic-angular';\nimport { ProductoProvider } from '../../providers/producto/producto';\nimport { SQLite, SQLiteObject } from '@ionic-native/sqlite';\nimport { Storage } from '@ionic/storage';\n\n\n/**\n * Generated class for the ModalPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-modal',\n  templateUrl: 'modal.html',\n})\nexport class ModalPage {\n\n  cliente\n\n  productos: any;\n  productosSQL: any=[];\n\n  consulta: any;\n  consulta2: any;\n\n  searchQuery: string = '';\n  items: any;\n  myitem= [];\n  promoClave: any;\n  inruta: any;\n\n  rutamail\n\npromoSQL: any;\n\n  tipoPrecioRuta: Number\n  //tipRuta\n\n  carrito: Array<any> = [];  //arreglo de objetos\n // objeto: Array<any> = []; //no usar esto creaun arreglo \n objeto:any; //esto es solo un objeto \n\n  constructor(\n    public navCtrl: NavController,\n     public navParams: NavParams,\n      private view: ViewController,\n       private producto:ProductoProvider,\n       public alertCtrl:AlertController,\n       private toastCtrl: ToastController,\n       private Storage: Storage,\n       private sqlite: SQLite) {\n\n   // this.producto.getProductos().subscribe(res =>{\n     // this.productos = res.result;}) \n     this.getData();\n\n \n\n  }\n\n  showPrompt(producto){   //ventana emergente para agregar cantidad de piezas\n    if(producto.PD_NOMBRE.toString() == \"PROMOCION PAQUETES\"){\n      this.getPromos(producto.PD_CLAVE);\n      \n    }\n    \n    const prompt = this.alertCtrl.create({\n         \n\n      title:'Cantidad',\n      message:\"Agrege cantidad a vender\",\n      inputs: [\n        {\n          name:'cantidad',\n          placeholder:'#'\n        },\n      ],\n      buttons:[\n        {\n          text: 'Cancelar',\n          handler: data =>{\n            console.log('cancelado');\n          }\n      },\n      {\n        \n        text:'Guardar',\n        handler: data=>{\n     \n          if(Number(data.cantidad)){\n           if(data.cantidad > producto.EXISTENCIA){\n            this.inventarioIn();\n            this.closeModal();\n           }else{\n\n              this.objeto = {    //si usamos [{ ...}], [{ ... }]  crea un arreglo de arreglos\n              clave: producto.PD_CLAVE,\n              nombre: producto.PD_NOMBRE,\n              precio:producto.PRECIO_FINAL,\n              cantidad: data.cantidad,\n              iva:producto.IVA_FINAL*producto.PRECIO_FINAL * data.cantidad,\n              ieps:producto.IEPS_FINAL*producto.PRECIO_FINAL * data.cantidad,\n              importe: (data.cantidad*producto.PRECIO_FINAL) + (producto.IEPS_FINAL*producto.PRECIO_FINAL*data.cantidad) + producto.IVA_FINAL*producto.PRECIO_FINAL*data.cantidad,\n              equivalencia:producto.UM_CANTIDAD * data.cantidad\n            }\n          \n\n            }\n\n\t  // }\n\n           this.carrito.push(this.objeto);  //agrega la seleccion especifica de producto. \n           console.log (this.carrito);\n           this.closeModal();\n          }else{\n            this.presentToast();\n          }\n\n\n        }\n        \n      }\n      ]\n    });\n    prompt.present();\n  }\n\n  initializeItems() {\n    this.items = this.productosSQL;\n  }\n\n  getItems(ev: any){\n    // Reset items back to all of the items\n\n    this.initializeItems();\n\n    // set val to the value of the searchbar\n    let val = ev.target.value;\n\n    // if the value is an empty string don't filter the items\n    if (val && val.trim() != '') {\n      this.items = this.items.filter((item) => {\n        return (item.PD_NOMBRE.toUpperCase().indexOf(val.toUpperCase()) > -1);\n      })\n    }\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ModalPage');\n    this.obtenerRuta();\n    //this.getTipoPrecio()\n    this.cliente = this.navParams.get('cliente');\n    this.tipoPrecioRuta = this.navParams.get('tipoRuta')\n  }\n\n  closeModal(){\n    /*\n    let data = {\n     'carrito': this.carrito\n    };\n    */\n    this.view.dismiss(this.carrito); //se envia el arreglo del carrito\n   // console.log(producto);\n\n  }\n\n  presentToast() {\n    let toast = this.toastCtrl.create({\n      message: 'Error: Captura no vailida',\n      duration: 3000,\n      position: 'top'\n    });\n\n    toast.onDidDismiss(() => {\n      console.log('Dismissed toast');\n    });\n  \n    toast.present();\n  }\n\n  inventarioIn() {\n    let toast = this.toastCtrl.create({\n      message: 'Error: Insuficiente Inventario',\n      duration: 3000,\n      position: 'top'\n    });\n\n    toast.onDidDismiss(() => {\n      console.log('Dismissed toast');\n    });\n  \n    toast.present();\n  }\n\n\n\n  presentCosto() {\n    let toast = this.toastCtrl.create({\n      message: this.tipoPrecioRuta.toString(),\n      duration: 3000,\n      position: 'top'\n    });\n\n    toast.onDidDismiss(() => {\n      console.log('Dismissed toast');\n    });\n  \n    toast.present();\n  }\n\n  ionViewWillEnter(){\n    \n  }\n\n\n  obtenerRuta(){\n    this.Storage.get('useremail').then((val) =>{\n      this.rutamail = parseInt(val);\n      this.inruta = this.rutamail;\n    })\n  }\n\n getPromos(clave){\n //return new Promise(function(resolve, reject)\n  this.sqlite.create({\n    name: 'ionicdb.db',\n    location: 'default'\n  }).then((db: SQLiteObject) => {\n    \n    this.consulta = `select PM_CLAVE_PROMO, PM_CLAVE_PRODUCTO, PM_CANTIDAD, PM_PRECIOXUNIDAD_PROMO FROM tb_hh_promos WHERE PM_CLAVE_PROMO = ? AND PM_ESTATUS = \"VIGENTE\" `\n\n\n    //db.executeSql(this.consulta, [this.rutamail, this.cliente.CL_CLIENTE, this.tipoPrecioRuta])\n    console.log(clave);\n    db.executeSql(this.consulta, [clave])\n    .then(res => {\n      this.promoSQL = [];\n      for(var i=0; i<res.rows.length; i++) {\n        this.promoSQL.push({PM_CLAVE_PRODUCTO:res.rows.item(i).PM_CLAVE_PRODUCTO, PM_CLAVE_PROMO:res.rows.item(i).PM_CLAVE_PROMO,\n        PM_CANTIDAD:res.rows.item(i).PM_CANTIDAD,PM_PRECIOXUNIDAD_PROMO:res.rows.item(i).PM_PRECIOXUNIDAD_PROMO})\n      }\n     console.log(this.promoSQL)\n    })\n    .catch(e => console.log(e));\n});\n // })\n  \n}\n\n  \n\n\n\n  getData() {\n    this.sqlite.create({\n      name: 'ionicdb.db',\n      location: 'default'\n    }).then((db: SQLiteObject) => {\n      \n      this.consulta = `select * from(\n        SELECT PD_CLAVE, PD_NOMBRE, PD_UM, PD_GRUPO, CASE WHEN PRC_PRECIO_ESPECIAL IS NOT NULL THEN PRC_PRECIO_ESPECIAL ELSE PR_PRECIO END AS PRECIO_FINAL, CASE WHEN  PRC_IVA IS NOT NULL THEN PRC_IVA ELSE PR_IVA END IVA_FINAL, CASE WHEN PRC_IEPS IS NOT NULL THEN PRC_IEPS ELSE PR_IEPS END AS IEPS_FINAL, PR_SUCURSAL, PR_EMPRESA,UM_CANTIDAD, IN_CANTIDAD AS EXISTENCIA/**/\n                  FROM (SELECT Cve.PD_CLAVE, Cve.PD_NOMBRE, Cve.PD_UM, Cve.PD_GRUPO, Cve.PRC_PRECIO_ESPECIAL, Cve.PRC_IVA, Cve.PRC_IEPS, Cve.PR_PRECIO, Cve.PR_IVA, Cve.PR_IEPS, Cve.PR_SUCURSAL, Cve.PR_EMPRESA, Cve.UM_CANTIDAD, Inv.IN_CANTIDAD\n              \n          FROM( SELECT A.PD_CLAVE, A.PD_NOMBRE, A.PD_UM, A.PD_GRUPO,A.PRC_PRECIO_ESPECIAL, A.PRC_IVA, A.PRC_IEPS, B.PR_PRECIO, B.PR_IVA, B.PR_IEPS, B.PR_SUCURSAL, B.PR_EMPRESA, A.UM_CANTIDAD /**/\n                               FROM (SELECT Y.PD_CLAVE, Y.PD_NOMBRE, Y.PD_UM, Y.PD_GRUPO, X.PRC_CLAVE, X.PRC_PRECIO_ESPECIAL, X.PRC_IVA, X.PRC_IEPS, Y.UM_CANTIDAD /**/\n                                    FROM (SELECT PD_CLAVE, PD_NOMBRE, PD_UM, PD_GRUPO, UM_CANTIDAD/**/ FROM tb_hh_productos  WHERE (PD_BAJA <> 'B')) AS Y\n                                                    LEFT JOIN\n                                           (SELECT  PRC_CLAVE, PRC_PRECIO_ESPECIAL, PRC_IVA, PRC_IEPS FROM tb_hh_precio_cliente WHERE  (PRC_RUTA_CLIE = ?) AND (PRC_CLIENTE = ?)) AS X \n                                                           ON Y.PD_CLAVE = X.PRC_CLAVE) AS A\n                                                     LEFT JOIN\n                                           (SELECT PR_CLAVE, PR_PRECIO, PR_IVA, PR_IEPS, PR_SUCURSAL, PR_EMPRESA FROM  tb_hh_precios WHERE (PR_TIPO_PRECIO = ?)) AS B\n                                                           ON A.PD_CLAVE = B.PR_CLAVE) AS Cve\n                               INNER JOIN\n                          (SELECT IN_CLAVE, IN_CANTIDAD FROM tb_hh_inventario) AS Inv   \n                                          ON Cve.PD_CLAVE=Inv.IN_CLAVE ) AS P) F where PRECIO_FINAL is not null AND EXISTENCIA is not null ORDER BY PD_CLAVE DESC`\n\n\n      //db.executeSql(this.consulta, [this.rutamail, this.cliente.CL_CLIENTE, this.tipoPrecioRuta])\n      db.executeSql(this.consulta, [this.rutamail, this.cliente.CL_CLIENTE, this.tipoPrecioRuta])\n      .then(res => {\n        this.productosSQL = [];\n        for(var i=0; i<res.rows.length; i++) {\n          this.productosSQL.push({PD_CLAVE:res.rows.item(i).PD_CLAVE,PD_NOMBRE:res.rows.item(i).PD_NOMBRE, \n            PD_UM:res.rows.item(i).PD_UM,\n            PD_GRUPO:res.rows.item(i).PD_GRUPO, \n            PRECIO_FINAL:res.rows.item(i).PRECIO_FINAL, \n            IVA_FINAL:res.rows.item(i).IVA_FINAL,\n            IEPS_FINAL:res.rows.item(i).IEPS_FINAL,\n            PR_SUCURSAL:res.rows.item(i).PR_SUCURSAL,\n            PR_EMPRESA:res.rows.item(i).PR_EMPRESA,\n            UM_CANTIDAD:res.rows.item(i).UM_CANTIDAD,\n            EXISTENCIA:res.rows.item(i).EXISTENCIA\n          })\n        }\n      })\n      .catch(e => console.log(e));\n  });\n \n}\n\n\n /*\n async dobyPromos(clave){\n   this.promoClave = clave;\n   console.log (\"clave de promo:\");\n   console.log (this.promoClave);\n  var promos = await this.getPromos(this.promoClave)\n   this.guardardobyPromo(promos);\n   console.log (\"si hacer querry\");\n           // this.promoSQL;\n    console.log (this.promoSQL);\n}\nguardardobyPromo(promodobs){\n  for(var i; promodobs.length; i++){\n    this.objeto = {    //si usamos [{ ...}], [{ ... }]  crea un arreglo de arreglos\n             clave: promodobs.PM_CLAVE_PRODUCTO,\n             //nombre: this.promoSQL.,\n             precio: promodobs.PM_PRECIOXUNIDAD_PROMO,\n             cantidad: promodobs.PM_CANTIDAD,\n            //iva:producto.IVA_FINAL*producto.PRECIO_FINAL, \n            iva:0,\n            // ieps:producto.IEPS_FINAL*producto.PRECIO_FINAL,\n            ieps: 0,\n             importe: 0\n           }\n  }\n  return this.objeto;\n  \n}\n*/\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/modal/modal.ts"],"sourceRoot":""}