{"version":3,"sources":["../../src/pages/ticket/ticket.module.ts","../../src/pages/ticket/ticket.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TicketPage } from './ticket';\n\n@NgModule({\n  declarations: [\n    TicketPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(TicketPage),\n  ],\n})\nexport class TicketPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/ticket/ticket.module.ts","import { Component } from '@angular/core';\nimport {IonicPage, NavController,ModalController,AlertController, NavParams,ToastController,  ViewController} from 'ionic-angular';\nimport {PrintProvider} from '../../providers/print/print';\nimport {PrinterListModalPage} from '../printer-list-modal/printer-list-modal';\nimport { SQLite, SQLiteObject } from '@ionic-native/sqlite';\nimport{Storage} from '@ionic/storage'\n\n/**\n * Generated class for the TicketPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-ticket',\n  templateUrl: 'ticket.html',\n})\nexport class TicketPage {\n\n  selectedPrinter:any=[];\n\n  //Variables para recibir la informacion desde el carrito\n  cliente: any;  //variable que recibe arreglo\n  clavesVta:any;  //variable que recibe arreglo\n \n  tipoVentaCliente:String; //datos del total de la venta\n  reconocimientoVta:Number;\n  subtotalVta:Number;\n  IVAVta:Number;\n  IEPSVta:Number;\n  totalFinal:Number;\n  KLAcumVta:Number;\n \n  rutamail:number;\n\n  tipoImpresion:string;\n\n   //VARIABLES***********\n\n   producto: any;\n   consulta: string;\n   consulta1: string;\n   cantidadVenta: number[];\n   cantidadActual: number[];\n   cantidadNUeva: number[];\n   claveProd: Number[];\n   cantNum:number;\n   largoArreglos: Number;\n   clavenum: Number;\n //****************** */\n \n \n\n  constructor(public navCtrl: NavController,private modalCtrl:ModalController,\n    private printProvider:PrintProvider,  private view: ViewController,\n    private alertCtrl:AlertController,\n    public navParams: NavParams,  private toastCtrl: ToastController,\n    public Storage:Storage, private sqlite: SQLite) {\n      \n      //proceso para recibir la informacion desde el carrito\n      this.cliente = navParams.get('cliente'); //arreglo para datos del cliente\n\n      this.clavesVta = navParams.get('productos'); //arreglo para datos de la venta\n\n      this.tipoVentaCliente = navParams.get('tipoVentaCliente'); //informacion del total de la venta\n      this.reconocimientoVta = navParams.get('reconocimientoVta'); \n      this.subtotalVta = navParams.get('subtotalVta'); \n      this.IVAVta = navParams.get('IVAVta'); \n      this.totalFinal = navParams.get('totalFinal'); \n      this.KLAcumVta = navParams.get('KLAcumVta'); \n      this.IEPSVta = navParams.get('IEPSVta'); \n      this.tipoImpresion='';\n\n      this.producto = JSON.parse(JSON.stringify(this.navParams.get('producto')));\n  \n  }\n  ionViewDidEnter(){\n    this.obtenerCantidades();\n   }\n\n\n   obtenerCantidades(){\n    console.log(this.producto.length)\n    this.claveProd = []\n      this.cantidadVenta = []\n    for(var i = 0;i<this.producto.length; i++ ){\n      //console.log(this.producto.cantidad)\n      this.claveProd.push(parseInt(this.producto[i]['clave'])) \n      this.cantidadVenta.push(parseInt(this.producto[i]['cantidad']))\n      console.log(this.cantidadVenta)\n      \n    }\n    this.getCantidad(this.claveProd, this.cantidadVenta)\n    //console.log(this.cantidadVenta)\n\n  }\n\n  getCantidad(clave, cant){\n    //return new Promise(function(resolve, reject)\n     this.sqlite.create({\n       name: 'ionicdb.db',\n       location: 'default'\n     }).then((db: SQLiteObject) => {\n      console.log(clave,\"Claves\")\n      console.log(cant, \"cantidad de ventas\")\n      this.cantidadActual = []; \n         for(var e =0; e<clave.length; e++){\n          \n        this.consulta = `select IN_CANTIDAD FROM tb_hh_inventario WHERE IN_CLAVE =?`\n        this.clavenum = clave[e];\n        console.log(this.clavenum)\n                \n        db.executeSql(this.consulta,[this.clavenum])\n        .then(res => {\n          \n          for(var a=0; a<res.rows.length; a++) {\n            this.cantidadActual.push(res.rows.item(a).IN_CANTIDAD) \n            console.log(this.cantidadActual, \"cantidad en int\")\n          }\n        \n          \n          }).catch(e => console.log(e));\n          \n          \n      }\n     \n    }).then(res =>{\n     \n\n      })\n    \n   }\n\n   restar(){\n     this.cantidadNUeva =[]\n    for(var p=0; p<this.cantidadActual.length; p++){\n      console.log(\"segundo for\")\n      this.cantidadNUeva.push(this.cantidadActual[p]- this.cantidadVenta[p])\n      console.log(this.cantidadNUeva,\"cantidades nuevas\")\n    }\n    //return new Promise(function(resolve, reject)\n     this.sqlite.create({\n       name: 'ionicdb.db',\n       location: 'default'\n     }).then((db: SQLiteObject) => {\n      console.log(\"update\")\n\n      console.log(this.cantidadNUeva,this.claveProd)\n      for(var i=0; i<this.cantidadNUeva.length; i++){\n        this.consulta1 = `UPDATE tb_hh_inventario SET IN_CANTIDAD = ? WHERE IN_CLAVE = ?`\n\n        db.executeSql(this.consulta1, [this.cantidadNUeva[i],this.claveProd[i]])\n        .catch(e => console.log(e));\n          console.log(this.cantidadNUeva)\n        \n      }\n        \n      })\n    // })\n     \n   }\n\n   showPrompt(){   //ventana emergente para agregar cantidad de piezas\n          \n    const prompt = this.alertCtrl.create({\n         \n\n      title:'Confirmar Venta',\n      message:\"Desea finalizar venta?\",\n      buttons:[\n        {\n          text: 'Cancelar',\n          handler: data =>{\n            console.log('cancelado');\n          }\n      },\n      {\n        \n        text:'Guardar',\n        handler: data=>{\n          this.restar();\n          this.imprimirNotaVta();\n       \n        }\n        \n      }\n      ]\n    });\n    prompt.present();\n  }\n\n\n\n\n\n\n\n\n\n\n//-----\n  ionViewDidLoad() {\n    console.log(\"Entro a ticket\");\n    console.log(this.cliente);\n    console.log(this.clavesVta);\n    console.log(this.tipoVentaCliente);\n    this.obtenerRuta();\n    this.listBTDevice(); //Buscar impresora conectada por Bluetooth\n  }\n\n  obtenerRuta(){\n    this.Storage.get('useremail').then((val) =>{\n      this.rutamail = parseInt(val);\n    })\n  }\n\n  listBTDevice()\n  {\n    this.printProvider.searchBt().then(datalist=>{\n      \n      //1. Open printer select modal\n      let abc=this.modalCtrl.create(PrinterListModalPage,{data:datalist});\n      \n      //2. Printer selected, save into this.selectedPrinter\n      abc.onDidDismiss(data=>{\n        this.selectedPrinter=data;\n\n        /*let xyz=this.alertCtrl.create({\n          title: data.name+\" selected\",\n          buttons:['Dismiss']\n        });\n        xyz.present();*/\n\n      });\n      \n      //0. Present Modal\n      abc.present();\n\n    },err=>{\n      console.log(\"ERROR\",err);\n      let mno=this.alertCtrl.create({\n        title:\"ERROR \"+err,\n        buttons:['Dismiss']\n      });\n      mno.present();\n    })\n\n  }\n\n/*  testConnectPrinter()\n  {\n    var id=this.selectedPrinter.id;\n    if(id==null||id==\"\"||id==undefined)\n    {\n      //nothing happens, you can put an alert here saying no printer selected\n    }\n    else\n    {\n      let foo=this.printProvider.connectBT(id).subscribe(data=>{\n        console.log(\"CONNECT SUCCESSFUL\",data);\n\n        let mno=this.alertCtrl.create({\n          title:\"Connect successful\",\n          buttons:['Dismiss']\n        });\n        mno.present();\n\n      },err=>{\n        console.log(\"Not able to connect\",err);\n        let mno=this.alertCtrl.create({\n          title:\"ERROR \"+err,\n          buttons:['Dismiss']\n        });\n        mno.present();\n      });\n    }\n  }*/\n  \n\n  imprimirNotaVta()\n  {\n    var id=this.selectedPrinter.id;\n    if(id==null||id==\"\"||id==undefined)\n    {\n      //nothing happens, you can put an alert here saying no printer selected\n    }\n    else\n    {\n      this.tipoImpresion='[ORIGINAL]';                // id es la direccion de la impresora conectada\n      let foo=this.printProvider.ProveedorimpresionNotaVta(id,this.cliente, this.clavesVta,this.tipoVentaCliente, this.reconocimientoVta, this.subtotalVta,this.IVAVta, this.totalFinal,this.KLAcumVta, this.IEPSVta,   this.rutamail, this.tipoImpresion);  \n\n    //reimprimir nota infinita cantidad de veces hasta que seleccione No\n    let alert = this.alertCtrl.create({\n      title: 'Desea otra impresión de la venta?',\n      buttons: [\n          {\n              text: 'SI',\n              handler: () => {\n                  alert.dismiss(true);\n                this.tipoImpresion='[REIMPRESION]';\n                  let foo=this.printProvider.ProveedorimpresionNotaVta(id,this.cliente, this.clavesVta,this.tipoVentaCliente, this.reconocimientoVta, this.subtotalVta,this.IVAVta, this.totalFinal,this.KLAcumVta, this.IEPSVta,   this.rutamail, this.tipoImpresion);  \n                  return false;\n              }\n          }, {\n              text: 'No',\n              handler: () => {\n                  alert.dismiss(false);\n                  return false;\n              }\n          }\n      ]\n  });\n\n  alert.present();\n\n    }\n  }\n\n}//fin1\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/ticket/ticket.ts"],"sourceRoot":""}